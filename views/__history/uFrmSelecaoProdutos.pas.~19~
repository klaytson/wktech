unit uFrmSelecaoProdutos;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Data.DB, Vcl.StdCtrls, Vcl.Grids,
  Vcl.DBGrids, ClasseProdutos;

type
  TFrmSelecaoProdutos = class(TForm)
    Label1: TLabel;
    EdtNomeProduto: TEdit;
    BtnSelecionar: TButton;
    Button1: TButton;
    DBGrid1: TDBGrid;
    procedure BtnSelecionarClick(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  FrmSelecaoProdutos: TFrmSelecaoProdutos;
  Produto: TProdutos;

implementation

Uses uFrmMain, ControllerProdutos;

{$R *.dfm}


procedure TFrmSelecaoProdutos.BtnSelecionarClick(Sender: TObject);
Var
  //ObjPedido: TPedidos;
  ObjControllerPedido: TControllerPedidos;
begin
  FrmMain.Panel2.Visible := True;

  ObjPedido := TPedidos.Create();
  ObjPedido.CodigoCliente := GridClientes.Columns[0].Field.Value;
  ObjPedido.DataEmissao := Date();
  ObjPedido.ValorTotal := 0.0;

  objCliente.Nome := GridClientes.Columns[1].Field.Value;
  objCliente.Codigo := GridClientes.Columns[0].Field.Value;

  ObjControllerPedido := TControllerPedidos.Create();
  ObjControllerPedido.Inserir(ObjPedido);

  Close;


  Close;
end;

procedure TFrmSelecaoProdutos.Button1Click(Sender: TObject);
Var
  ControllerProduto: TControllerProdutos;
begin
  Produto := TProdutos.Create();

  ControllerProduto := TControllerProdutos.create();
  Produto := ControllerProduto.Consultar(EdtNomeProduto.Text);
end;

procedure TFrmSelecaoProdutos.FormClose(Sender: TObject;
  var Action: TCloseAction);
begin
  FrmMain.Edit2.Text := IntToStr(Produto.Codigo);
  FrmMain.Edit3.Text := Produto.Descricao;
  FrmMain.Edit5.Text := Produto.PrecoVenda;
  FrmMain.Edit1.Text := FrmMain.LblNumeroPedido.Caption;
end;

end.
